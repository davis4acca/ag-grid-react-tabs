(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,t,n){e.exports=n(50)},33:function(e,t,n){},38:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(14),o=n.n(r),s=(n(33),n(3)),l=n(12),u=n(2),d=n(25),c="DESTROY_TAB",p="ADD_NEW_VIEW",f="REMOVE_VIEW",v="CHANGE_VIEW_NAME",h="CHANGE_VIEW",m="ADD_NEW_TAB",w="CHANGE_TAB_NAME",b="SET_TAB_INDEX",S="SET_CURRENT_VIEW_INFO_TO_NULL",g="SET_GRID_DATA",I="SAVE_GRID_SORT_MODEL",y="SAVE_GRID_FILTER_MODEL",N="SAVE_GRID_COLUMN_STATE",V="SAVE_GRID_COLUMN_GROUP_STATE",E="SAVE_GRID_PIVOT_MODE_STATE",G="SAVE_STORE_STATE_TO_LOCAL_STORAGE",C="RESTORE_STORE_STATE_TO_LOCAL_STORAGE",O="SET_GRID_FETCH_AGAIN_TO_FALSE",T="SET_ROW_SELECTION_SYNC_STATUS",A=n(1);function D(e){var t,n,i;return(null===e||void 0===e||null===(t=e.allViews[null===e||void 0===e||null===(n=e.currentViewInfo)||void 0===n?void 0:n.index])||void 0===t?void 0:t.allGrids)?null===e||void 0===e?void 0:e.allViews[null===e||void 0===e||null===(i=e.currentViewInfo)||void 0===i?void 0:i.index].allGrids:[]}function _(e){var t=e.currentViewInfo,n=null===t||void 0===t?void 0:t.index,i=null===e||void 0===e?void 0:e.allViews[n];return(null===i||void 0===i?void 0:i.tabIndex)?i.tabIndex:0}function R(e){return e.currentViewInfo?e.allViews[e.currentViewInfo.index]:null}function M(e,t){var n=e.allViews.findIndex((function(e){return e.id===t})),i=e.allViews[n];if(i)return i;throw new Error("VIEW NOT FOUND!!")}function j(e,t,n){var i=M(e,t),a=i.allGrids.findIndex((function(e){return e.id===n})),r=i.allGrids[a];if(r)return r;throw new Error("GRID NOT FOUND!!")}function k(e,t){for(var n,i=e.allViews,a=0;a<i.length;a++){var r=i[a].allGrids;if("object"===typeof grid)break;for(var o=0;o<r.length;o++){var s=r[o];if(s.id===t){n=s;break}}}if(n)return n;new Error(" GRID NOT FOUND << < << ")}function F(e,t){return Object(A.a)(e,(function(e){var n={id:t,allGrids:[]};e.allViews.push(n)}))}function x(e,t){return Object(A.a)(e,(function(e){var n=function(e,t){var n=e.allViews.findIndex((function(e){return e.id===t}));if(n>-1)return n;throw new Error("VIEW INDEX NOT FOUND!!")}(e,t);e.allViews.splice(n,1)}))}function L(e,t){return Object(A.a)(e,(function(e){var n=e.allViews.findIndex((function(e){return e.id===t})),i={id:t,index:n};e.currentViewInfo=i}))}function P(e,t){return Object(A.a)(e,(function(e){D(e).push(t)}))}function U(e,t){var n=t.viewId,i=t.gridId,a=t.newName;return Object(A.a)(e,(function(e){j(e,n,i).name=a}))}function W(e,t){return Object(A.a)(e,(function(e){e.allViews[e.currentViewInfo.index].tabIndex=t}))}function B(e){return Object(A.a)(e,(function(e){e.currentViewInfo=null}))}function H(e,t){var n=t.viewId,i=t.gridId,a=t.newData;return Object(A.a)(e,(function(e){j(e,n,i).rowData=a}))}function Y(e,t){var n=t.gridId,i=t.sortModel;return Object(A.a)(e,(function(e){k(e,n).sortModel=i}))}function z(e,t){var n=t.gridId,i=t.filterModel;return Object(A.a)(e,(function(e){k(e,n).filterModel=i}))}function J(e,t){var n=t.gridId,i=t.columnState;return Object(A.a)(e,(function(e){var t=k(e,n);t&&(t.columnState=i)}))}function X(e,t){var n=t.gridId,i=t.columnGroupState;return Object(A.a)(e,(function(e){var t=k(e,n);t&&(t.columnGroupState=i)}))}function K(e,t){var n=t.gridId,i=t.isPivotMode;return Object(A.a)(e,(function(e){k(e,n).isPivotMode=i}))}function q(e){var t={currentViewInfo:e.currentViewInfo,allViews:[]};e.allViews.forEach((function(e){var n={id:e.id,tabIndex:e.tabIndex,allGrids:[],rowSelectionSyncStatus:null===e||void 0===e?void 0:e.rowSelectionSyncStatus,name:e.name};e.allGrids.forEach((function(e){var t={id:e.id,columnDefs:e.columnDefs,url:e.url,sortModel:e.sortModel,filterModel:e.filterModel,columnState:e.columnState,columnGroupState:e.columnGroupState,fetchAgain:!0,isPivotMode:e.isPivotMode,name:e.name};n.allGrids.push(t)})),t.allViews.push(n)}));var n=JSON.stringify(t);return localStorage.setItem("cache",n),e}function Q(e){return JSON.parse(localStorage.getItem("cache"))}function Z(e,t){var n=t.viewId,i=t.gridId;return Object(A.a)(e,(function(e){j(e,n,i).fetchAgain=!1}))}function $(e,t){return Object(A.a)(e,(function(e){D(e).splice(t,1)}))}function ee(e,t){var n=t.viewId,i=t.status;return Object(A.a)(e,(function(e){M(e,n).rowSelectionSyncStatus=i}))}function te(e,t){var n=t.viewId,i=t.newName;return Object(A.a)(e,(function(e){M(e,n).name=i}))}var ne,ie=n(26),ae=n.n(ie),re=n(27),oe=window.localStorage.getItem("cache");if(oe){var se=JSON.parse(oe);ne=Object(l.a)({},se)}else ne={currentViewInfo:null,allViews:[]};var le=Object(u.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case p:return F(e,n);case f:return x(e,n);case h:return L(e,n);case v:return te(e,n);case m:return P(e,n);case w:return U(e,n);case b:return W(e,n);case S:return B(e);case g:return H(e,n);case I:return Y(e,n);case y:return z(e,n);case N:return J(e,n);case V:return X(e,n);case E:return K(e,n);case G:return q(e);case C:return Q(e);case O:return Z(e,n);case c:return $(e,n);case T:return ee(e,n);default:return e}}),ne,Object(d.composeWithDevTools)(Object(u.applyMiddleware)(re.a,ae.a))),ue=n(6),de=n(7),ce=n(10),pe=n(8),fe=n(11),ve=(n(38),n(4)),he=(n(39),0);function me(){return new Date+""+he++}var we={createNewView:function(){return function(e,t){var n=me();e(we.addNewView(n)),e(we.changeView(n))}},createNewTab:function(e){return function(t,n){var i=null!==n().currentViewInfo;if(e.id=me(),!i){var a=me();t(we.createNewView(a))}t(we.addNewTab(e));var r=D(le.getState()).length-1,o=le.getState().currentViewInfo.id;t(we.setTabIndex(r)),t(we.fetchGridData(o,e.id,e.url))}},destroyView:function(e){return function(t,n){var i=n().currentViewInfo.id,a=i===e,r=1===n().allViews.length;if(t(we.removeView(e)),r)t(we.setCurrentViewInfoToNull());else if(!a||r)r||a||t(we.changeView(i));else{var o=n().allViews,s=o[o.length-1];t(we.changeView(s.id))}}},fetchGridData:function(e,t,n){return function(i){fetch(n).then((function(n){return n.json().then((function(n){i(we.fetchGridDataSuccess(e,t,n))}))})).catch((function(e){i(we.fetchGridDataFail(e))}))}},fetchGridDataSuccess:function(e,t,n){return function(i){i(we.setGridData(e,t,n)),i(we.setGridFetchAgainToFalse(e,t))}},fetchGridDataFail:function(e){new Error(e," <<<< FETCH GRID DATA FAIL")},changeTab:function(e){return function(t,n){var i=n(),a=i.currentViewInfo.index,r=i.allViews[a],o=i.currentViewInfo.id,s=r.allGrids[e],l=s.id,u=s.url,d=s.fetchAgain;t(we.setTabIndex(e)),d&&t(we.fetchGridData(o,l,u))}},destroyTab:function(e){return{type:c,payload:e}},addNewView:function(e){return{type:p,payload:e}},changeTabName:function(e,t,n){return{type:w,payload:{viewId:e,gridId:t,newName:n}}},removeView:function(e){return{type:f,payload:e}},changeViewName:function(e,t){return{type:v,payload:{viewId:e,newName:t}}},changeView:function(e){return{type:h,payload:e}},addNewTab:function(e){return{type:m,payload:e}},setTabIndex:function(e){return{type:b,payload:e}},setCurrentViewInfoToNull:function(){return{type:S}},setGridData:function(e,t,n){return{type:g,payload:{viewId:e,gridId:t,newData:n}}},saveGridSortModel:function(e,t){return{type:I,payload:{gridId:e,sortModel:t}}},saveGridFilterModel:function(e,t){return{type:y,payload:{gridId:e,filterModel:t}}},saveGridColumnState:function(e,t){return{type:N,payload:{gridId:e,columnState:t}}},saveGridColumnGroupState:function(e,t){return{type:V,payload:{gridId:e,columnGroupState:t}}},saveGridPivotModeState:function(e,t){return{type:E,payload:{gridId:e,isPivotMode:t}}},saveStoreStateToLocalStorage:function(){return{type:G}},restoreStoreStateToLocalStorage:function(){return{type:C}},setGridFetchAgainToFalse:function(e,t){return{type:O,payload:{viewId:e,gridId:t}}},setRowSelectionSyncStatus:function(e,t){return{type:T,payload:{viewId:e,status:t}}}},be=n(16),Se=(n(23),n(48),n(13));Se.LicenseManager.setLicenseKey("[TRIAL]_16_May_2020_[v2]_MTU4OTU4NzIwMDAwMA==b03f1f5b63303eabbc3b42a734fcc666");var ge=function(e){function t(e){var n;return Object(ue.a)(this,t),(n=Object(ce.a)(this,Object(pe.a)(t).call(this,e))).columnDefs=[{field:"viewName",headerName:"Name",flex:1,editable:!0,onCellValueChanged:function(e){n.props.actions.changeViewName(e.data.viewId,e.newValue)},valueGetter:function(e){return e.data.viewName?e.data.viewName:"New View"},cellRenderer:function(e){var t=document.createElement("div");return t.classList.add("view-nane-column-cell"),t.innerHTML=' <button class="view-name-column-cell-delete-btn"> X </button> <span> '.concat(e.value," </span>"),t.querySelector("button").addEventListener("click",(function(t){t.stopPropagation();var i=e.data.viewId;document.activeElement.blur(),n.props.actions.destroyView(i)})),t}}],n}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"syncRowSelection",value:function(e){var t,n=this.props.currentViewInfo,i=null===(t=this.props.currentView)||void 0===t?void 0:t.rowSelectionSyncStatus,a=this.gridApi.getRowNode(null===n||void 0===n?void 0:n.id),r=null===a||void 0===a?void 0:a.selected;"SYNCING"===i||r||void 0===a||null===n||(this.props.actions.setRowSelectionSyncStatus(n.id,"SYNCING"),a.setSelected(!0),this.props.actions.setRowSelectionSyncStatus(n.id,"SYNC_DONE"))}},{key:"componentDidUpdate",value:function(e){this.syncRowSelection(e)}},{key:"onFirstDataRendered",value:function(e){var t,n,i=this.gridApi.getRowNode(null===(t=this.props)||void 0===t||null===(n=t.currentView)||void 0===n?void 0:n.id);i&&i.setSelected(!0)}},{key:"onRowSelected",value:function(e){var t;"SYNCING"!==(null===(t=this.props.currentView)||void 0===t?void 0:t.rowSelectionSyncStatus)&&(e.node.selected&&this.props.actions.changeView(e.node.id))}},{key:"onGridReady",value:function(e){this.gridApi=e.api,this.columnApi=e.columnApi}},{key:"render",value:function(){return this.rowData=this.props.allViews.map((function(e){return{viewId:e.id,viewName:e.name}})),a.a.createElement("div",{className:"ag-theme-alpine  ".concat(this.props.className)},a.a.createElement(be.AgGridReact,{overlayNoRowsTemplate:'<span style="padding: 10px; border: 2px solid #444; background: lightgoldenrodyellow;"> There are no views available. Add a new view</span>',rowSelection:"single",rowData:this.rowData,columnDefs:this.columnDefs,onGridReady:this.onGridReady.bind(this),onFirstDataRendered:this.onFirstDataRendered.bind(this),onRowSelected:this.onRowSelected.bind(this),frameworkComponents:this.frameworkComponents,getRowNodeId:function(e){return e.viewId},rowHeight:60}))}}]),t}(a.a.Component),Ie=Object(s.b)((function(e){return{allViews:e.allViews,currentViewInfo:e.currentViewInfo,currentView:R(e)}}),(function(e){return{actions:Object(u.bindActionCreators)(we,e)}}))(ge);function ye(e,t,n){var i;return function(){var a=this,r=arguments,o=function(){i=null,n||e.apply(a,r)},s=n&&!i;clearTimeout(i),i=setTimeout(o,t),s&&e.apply(a,r)}}n(49);Se.LicenseManager.setLicenseKey("[TRIAL]_16_May_2020_[v2]_MTU4OTU4NzIwMDAwMA==b03f1f5b63303eabbc3b42a734fcc666");var Ne=function(e){function t(e){var n;return Object(ue.a)(this,t),(n=Object(ce.a)(this,Object(pe.a)(t).call(this,e))).defaultColDef={sortable:!0,filter:!0,resizable:!0,enableValue:!0,enablePivot:!0,enableRowGroup:!0},n.debounceSaveGridColumnState=ye((function(e,t){n.props.actions.saveGridColumnState(e,t)}),500),n.debounceSaveGridColumnGroupState=ye((function(e,t){n.props.actions.saveGridColumnGroupState(e,t)}),500),n.debounceSaveGridPivotModeState=ye((function(e,t){n.props.actions.saveGridPivotModeState(e,t)}),500),n}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"onGridReady",value:function(e){this.gridApi=e.api,this.gridColumnApi=e.columnApi;var t=this.props.currentViewInfo.id,n=this.props.id,i=this.props.url;this.props.fetchAgain&&this.props.actions.fetchGridData(t,n,i)}},{key:"onFilterChanged",value:function(e){var t=e.api.getFilterModel();this.props.actions.saveGridFilterModel(this.props.id,t)}},{key:"onSortChanged",value:function(e){var t=e.api.getSortModel();this.props.actions.saveGridSortModel(this.props.id,t)}},{key:"onFirstDataRendered",value:function(e){var t,n,i,a,r,o,s,l,u=null===(t=this.props)||void 0===t?void 0:t.sortModel,d=null===(n=this.props)||void 0===n?void 0:n.filterModel,c=null===(i=this.props)||void 0===i?void 0:i.columnState,p=null===(a=this.props)||void 0===a?void 0:a.columnGroupState,f=null===(r=this.props)||void 0===r?void 0:r.isPivotMode,v=(null===(o=this.gridColumnApi)||void 0===o?void 0:o.isPivotMode())!==(null===this||void 0===this||null===(s=this.props)||void 0===s?void 0:s.isPivotMode);c&&this.gridColumnApi.setColumnState(c),p&&this.gridColumnApi.setColumnGroupState(p),u&&this.gridApi.setSortModel(u),d&&this.gridApi.setFilterModel(d),void 0!==(null===this||void 0===this||null===(l=this.props)||void 0===l?void 0:l.isPivotMode)&&v&&this.gridColumnApi.setPivotMode(f)}},{key:"onSaveGridColumnState",value:function(e){var t,n;if(this.gridColumnApi){var i=null===(t=this.gridColumnApi)||void 0===t?void 0:t.getColumnState(),a=null===(n=this.gridColumnApi)||void 0===n?void 0:n.getColumnGroupState();this.debounceSaveGridColumnState(this.props.id,i),this.debounceSaveGridColumnGroupState(this.props.id,a)}}},{key:"onSavePivotModeState",value:function(){var e=this.gridColumnApi.isPivotMode();this.gridColumnApi.isPivotMode()!==this.props.isPivotMode&&this.debounceSaveGridPivotModeState(this.props.id,e)}},{key:"render",value:function(){return a.a.createElement("div",{className:"ag-theme-alpine-dark ".concat(this.props.className)},a.a.createElement(be.AgGridReact,{columnDefs:this.props.columnDefs,rowData:this.props.rowData,defaultColDef:this.defaultColDef,sideBar:!0,onFirstDataRendered:this.onFirstDataRendered.bind(this),onFilterChanged:this.onFilterChanged.bind(this),onGridReady:this.onGridReady.bind(this),onSortChanged:this.onSortChanged.bind(this),onColumnVisible:this.onSaveGridColumnState.bind(this),onColumnPinned:this.onSaveGridColumnState.bind(this),onColumnResized:this.onSaveGridColumnState.bind(this),onColumnMoved:this.onSaveGridColumnState.bind(this),onColumnRowGroupChanged:this.onSaveGridColumnState.bind(this),onColumnValueChanged:this.onSaveGridColumnState.bind(this),onColumnPivotModeChanged:this.onSavePivotModeState.bind(this),onNewColumnsLoaded:this.onSaveGridColumnState.bind(this),onGridColumnsChanged:this.onSaveGridColumnState.bind(this),onDisplayedColumnsChanged:this.onSaveGridColumnState.bind(this),onColumnEverythingChanged:this.onSaveGridColumnState.bind(this)}))}}]),t}(i.Component),Ve=Object(s.b)((function(e){return{currentViewInfo:e.currentViewInfo}}),(function(e){return{actions:Object(u.bindActionCreators)(we,e)}}))(Ne);var Ee=function(e){function t(e){var n;return Object(ue.a)(this,t),(n=Object(ce.a)(this,Object(pe.a)(t).call(this,e))).inputElRef=a.a.createRef(),n.state={editing:!1,gridName:void 0!==e.gridName?e.gridName:"New Tab"},n}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"onNameChange",value:function(e){this.setState(Object(l.a)({},this.state,{gridName:e.target.value}))}},{key:"handleClick",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),this.setState(Object(l.a)({},this.state,{editing:!0})),setTimeout((function(){t.inputElRef.current.focus(),t.inputElRef.current.select()}),50)}},{key:"onBlur",value:function(){this.setState(Object(l.a)({},this.state,{editing:!1})),this.props.actions.changeTabName(this.props.viewId,this.props.gridId,this.state.gridName)}},{key:"handleEnter",value:function(e){"Enter"===e.key&&(this.setState(Object(l.a)({},this.state,{editing:!1})),this.props.actions.changeTabName(this.props.viewId,this.props.gridId,this.state.gridName))}},{key:"render",value:function(){var e=this,t=this.props.gridName?this.props.gridName:"New Tab",n=this.state.editing?"inline-block":"none",r=this.state.editing?"none":"inline-block";return a.a.createElement(i.Fragment,null,a.a.createElement("div",{onDoubleClick:this.handleClick.bind(this)},a.a.createElement("input",{onKeyPress:this.handleEnter.bind(this),style:{display:n},value:this.state.gridName,onChange:this.onNameChange.bind(this),onBlur:this.onBlur.bind(this),ref:this.inputElRef}),a.a.createElement("span",{style:{display:r}},t),a.a.createElement("button",{className:"tab-btn",onClick:function(t){t.stopPropagation(),e.props.actions.destroyTab(e.props.index)}},"X")))}}]),t}(i.Component),Ge=Object(s.b)(null,(function(e){return{actions:Object(u.bindActionCreators)(we,e)}}))(Ee);var Ce=function(e){function t(){return Object(ue.a)(this,t),Object(ce.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(fe.a)(t,e),Object(de.a)(t,[{key:"addNewTab",value:function(e){var t={url:"https://raw.githubusercontent.com/ag-grid/ag-grid/master/grid-packages/ag-grid-docs/src/olympicWinnersSmall.json",columnDefs:[{field:"athlete"},{field:"age"},{field:"country"},{field:"year"},{field:"date"},{field:"sport"},{field:"gold"},{field:"silver"},{field:"bronze"},{field:"total"}]};this.props.actions.createNewTab(t)}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{className:"action-button",onClick:this.props.actions.saveStoreStateToLocalStorage},"SAVE STORE TO LOCAL STORAGE"),a.a.createElement("button",{className:"action-button",onClick:this.props.actions.createNewView},"ADD NEW VIEW"),a.a.createElement("div",{className:"flex-container"},a.a.createElement(Ie,{className:"all-views"}),a.a.createElement(ve.d,{className:"tabs-container",selectedIndex:this.props.currentViewTabIndex,onSelect:function(t){e.props.actions.changeTab(t)}},a.a.createElement(ve.b,null,function(e){var t=e.allGrids.map((function(t,n){return a.a.createElement(ve.a,{key:t.id},a.a.createElement(Ge,{viewId:e.currentView.id,gridId:t.id,gridName:t.name,index:n}))}));return t.push(a.a.createElement(ve.a,{onClick:function(t){t.stopPropagation(),"BUTTON"===t.target.tagName&&e.onAddNewTab()},key:"last-tab"},a.a.createElement("button",{className:"add-tab-btn"}," + "))),t}({allGrids:this.props.currentViewAllGrids,currentView:this.props.currentView,onAddNewTab:this.addNewTab.bind(this)})),function(e){var t=e.allGrids,n=e.className,i=t.map((function(e){return a.a.createElement(ve.c,{key:e.id},a.a.createElement(Ve,Object.assign({className:n},e)))})),r=a.a.createElement(ve.c,{key:"last-tab-panel"});return i.push(r),i}({allGrids:this.props.currentViewAllGrids,className:"grid-panel"}))))}}]),t}(i.Component),Oe=Object(s.b)((function(e){return{allViews:e.allViews,currentViewInfo:e.currentViewInfo,currentViewAllGrids:D(e),currentViewTabIndex:_(e),currentView:R(e)}}),(function(e){return{actions:Object(u.bindActionCreators)(we,e)}}))(Ce);o.a.render(a.a.createElement(s.a,{store:le},a.a.createElement(Oe,null)),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.2c929367.chunk.js.map